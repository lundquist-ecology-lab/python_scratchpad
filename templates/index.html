<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python Code Editor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/theme/monokai.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link rel="icon" href="/static/images/griffin2.png" type="image/png">
</head>
<body>
    <div class="warning-banner">
        ðŸš¨ This workspace is temporary! All work will be lost when the page is refreshed or closed. Download your files to save your work. ðŸš¨
    </div>
    <div class="header">
        <h1>Griffy Stats Python Code Editor</h1>
        <img src="{{ url_for('static', filename='images/griffin2.png') }}" style="width: 10%;">
        <p>Write, run, and experiment with Python code</p>
    </div>
    
    <div class="main-container">
        <div class="editor-container">
            <div class="toolbar">
                <div class="file-upload">
                    <label for="file-upload-input" class="file-upload-label">Upload Python File</label>
                    <input type="file" id="file-upload-input" accept=".py">
                    <span class="file-name-display" id="uploaded-file-name"></span>
                </div>
                <button class="run-button" id="run-button">Run</button>
                <button class="download-button" id="download-button">Download</button>
                <select class="file-dropdown" id="example-dropdown">
                    <option value="">Select Example</option>
                    <option value="hello">Hello World</option>
                    <option value="loops">For Loops</option>
                    <option value="conditionals">Conditionals</option>
                    <option value="functions">Functions</option>
                    <option value="lists">Lists & Dictionaries</option>
                    <option value="turtlegraphics">Turtle Graphics</option>
                </select>
            </div>
            <div class="file-tabs" id="file-tabs">
                <button class="file-tab active" data-filename="demo.py">
                    demo.py
                    <span class="file-tab-close">Ã—</span>
                </button>
                <button class="new-file-button" id="new-file-button">+</button>
            </div>
            <div class="editor-content">
                <div id="editor"></div>
            </div>
        </div>
        
        <div class="console-container">
            <div class="tab-buttons">
                <button class="tab-button active" data-tab="output">Output</button>
                <button class="tab-button" data-tab="images">Images</button>
                <button class="tab-button" data-tab="help">Help</button>
            </div>
            <div class="output-section">
                <div class="tab-content active" id="output-tab">
                    <div class="console-output" id="output"></div>
                </div>
                <div class="tab-content" id="images-tab">
                    <div class="images-heading">
                        <h3>Generated Images</h3>
                        <button class="refresh-button" id="refresh-images">Refresh</button>
                    </div>
                    <div class="image-gallery" id="image-gallery">
                        <div class="image-placeholder">Images generated by your code will appear here.</div>
                    </div>
                </div>
                <div class="tab-content" id="help-tab">
                    <div class="console-output">
                        <h3>Quick Help</h3>
                        <p><strong>Running Code:</strong> Click the "Run" button to execute your Python code.</p>
                        <p><strong>Uploading Files:</strong> Click "Upload Python File" to load your own .py files.</p>
                        <p><strong>Downloading Code:</strong> Enter a filename and click "Download" to save your code.</p>
                        <p><strong>Examples:</strong> Select from the dropdown to load example code.</p>
                        <p><strong>File Tabs:</strong> Click on tabs to switch between files. Your changes are preserved during the session.</p>
                        
                        <h3>Graphics Support</h3>
                        <p>This editor supports Turtle graphics and Matplotlib for creating visualizations.</p>
                        <p>Example Turtle code:</p>
                        <pre>
import turtle

t = turtle.Turtle()
t.speed(0)

# Draw a colorful spiral
colors = ['red', 'orange', 'yellow', 'green', 'blue', 'purple']
for i in range(360):
    t.pencolor(colors[i % 6])
    t.width(i / 100 + 1)
    t.forward(i / 2)
    t.left(59)
                        </pre>
                        
                        <h3>Important Notes</h3>
                        <p>- Your code is saved in memory during the current session.</p>
                        <p>- Changes persist between files as you switch tabs until you reload the page.</p>
                        <p>- Download your code if you want to save your work permanently!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="image-modal">
        <div class="modal-content">
            <span class="close-modal" id="close-modal">&times;</span>
            <div class="modal-image-container">
                <img src="" class="modal-image" id="modal-image">
            </div>
            <div class="modal-actions">
                <button class="download-button" id="download-modal-image">Download</button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/python/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/brython/3.12.0/brython.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/brython/3.12.0/brython_stdlib.min.js"></script>
    <script src="{{ url_for('static', filename='js/editor.js') }}"></script>
    <script src="{{ url_for('static', filename='js/output.js') }}"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>

